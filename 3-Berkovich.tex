% !TEX root = 7350.tex

\chapter{Berkovich spaces}

This generalizes Gelfand's theory. Much of the theory even works for 
non-commutative algebras. We do not require the existence of a base field, so 
our theory applies to ``arithmetic'' rings like $\bZ$ or 
$\bZ_2[x]/(7 x^3-5)$. 





\section{Berkovich spectrum of a normed ring}

We could phrase everything in terms of (rank-one) valuations and semivaluations.
Let $A$ be a commutative (unital) ring. 


\subsection{Norms and seminorms}

\begin{definition}
A \emph{seminorm} on $A$ is a function $\|\cdot\|\colon A\to \bR^{\geqslant 0}$ 
satisfying 
\begin{enumerate}
\item
$\|0\|=0$, $\|1\|\leqslant 1$, 

\item
$\|f+g\|\leqslant \|f\|+\|g\|$, 

\item
$\|f g\| \leqslant \|f\| \|g\|$. 
\end{enumerate}
\end{definition}

If we replace axiom 2 with $\|f+g\| \leqslant \max\{\|f\|,\|g\|\}$, we say the 
norm $\|\cdot\|$ is non-archimedean. We will focus primarily on non-archimedean 
norms. We allow $x\ne 0$ to have $\|x\|=0$. Define 
\[
  \ker(\|\cdot\|) = \{x\in A\colon \|x\| = 0\} .
\]
(Huber calls this the \emph{support} of $\|\cdot\|$.) This is a prime ideal in 
$A$. We call $\|\cdot\|$ a \emph{norm} if $\ker(\|\cdot\|)=0$. It turns out 
that our hypotheses imply that either $\|1\|=0$ or $\|1\|=1$. For, if 
$\|1\|\ne 0$, then $\|1\| \leqslant \|1\|\|1\|$, so $1\leqslant \|1\|$. If 
$\|1\|=0$, then $\|f\|=0$ for all $f\in A$. We want to allow this possibility 
so that the zero ring can have a norm. 

If $(A,\|\cdot\|)$ is a ring with seminorm, then $(A,+)$ is naturally a 
seminormed group, i.e.~it satisfies 
\begin{align*}
  \|0\| &=0 \\
  \|f+g\| &\leqslant \|f\|+\|g\| \\
  \|-f\| &= \|f\| .
\end{align*}
(Alternatively, replace the last two equations by 
$\|f-g\| \leqslant \|f\|+\|g\|$.) Any seminormed group carries a natural 
topology, so we get a topology on $A$. This topology is Hausdorff if and only 
if $\ker(\|\cdot\|)=0$. The (Hausdorff) completion $\widehat A$ exists (it can 
be defined via Cauchy sequences as usual), but the obvious map 
$Ai\colon\to \widehat A$ is injective if and only if $\ker(\|\cdot\|)=0$. In 
fact, $|ker(i)=\ker(\|\cdot\|)$. 

If we replace the axiom $\|f g\| \leqslant \|f\| \|g\|$ with 
$\|f g\| = \|f\| \|g\|$ and also assume $\|\cdot\|\ne 0$, we say that 
$\|\cdot\|$ is \emph{multiplicative}. If for all $f\in A$, $\|f^n\| = \|f\|^n$, 
we say $\|\cdot\|$ is \emph{power-multiplicative}. 

If $N$ is a subgroup of a seminormed group $(A,+)$, then we get a ``residue 
seminorm'' on $A/N$, defined by 
\[
  \|g+N\| = \inf\{\|f\|\colon f-g\in N\} .
\]
This gives a norm on $A/N$ if and only if $N$ is closed. 

Let $\varphi\colon M\to N$ be a homomorphism between seminormed groups. We call 
$\varphi$ \emph{bounded} if there exists some $C>0$ such that 
$\|\varphi(f)\|\leqslant C \|f\|$ for all $f\in M$. Clearly bounded functions 
are continuous. The converse does not hold in this level of generality. 

We say two seminorms $\|\cdot\|,\|\cdot\|'$ on a group are \emph{equivalent} if 
there exists $C_1,C_2>0$ such that 
\[
  C_1 \|\cdot\| \leqslant \|\cdot\|' \leqslant C_2 \|\cdot\| .
\]
Equivalent seminorms induce the same topology, but the converse is false in 
general. 

\begin{example}
Let $K$ be any field; consider $M=k[x]$. Let $f=\sum_0^n a_i x^i\in M$, and 
pick some $0<\alpha<1<\alpha'$. Define two seminorms on $M$ by:
\begin{align*}
  \|f\| &= \max\{\alpha^j\colon \alpha_j\ne 0\} \\
  \|f\|' &= \max\{{\alpha'}^j\colon \alpha_j\ne 0\} .
\end{align*}
Let $\varphi\colon (M,\|\cdot\|')\to (M,\|\cdot\|)$ be the identity on $M$. It 
is easy to check that $\varphi$ is bounded. Indeed, 
\[
  \frac{\|\varphi(f)\|}{\|f\|'} = \frac{\|f\|}{\|f\|'} = \frac{\alpha^j}{{\alpha'}^i} \leqslant 1 .
\]
Now $\varphi^{-1}$ is \emph{not} bounded (this is easy), but 
$\varphi^{-1}$ is continuous. We conclude that continuity does not imply 
boundedness. Moreover, bounded homeomorphisms need not have bounded inverses. 
\end{example}

Let $\varphi\colon M\to N$ be a linear map of seminormed groups. As groups, 
$M/\ker\varphi\simeq \image\varphi$, but this isomorphis might not respect the 
seminorms on the two groups. 

\begin{definition}
A linear map $\varphi\colon M\to N$ of seminormed groups is \emph{admissible} 
(or \emph{strict}) if the residue seminorm on $M/\ker\varphi$ and the seminorm 
on $\image\varphi$ are equivalent via the natural isomorphism 
$M/\ker\varphi\simeq \image\varphi$. 
\end{definition}

\begin{definition}
A \emph{Banach ring} is a normed ring which is complete (with respect to the 
norm). 
\end{definition}


\subsection{Examples and first properties}

\begin{example}
Any ring is with the trivial norm 
\[
  \|f\| = \begin{cases} 1 & \text{if }f\ne 0 \\ 0 & \text{if }f=0 \end{cases}
\]
is a Banach ring. 
\end{example}

\begin{example}
The ring $(\bZ,\|\cdot\|_\infty)$ is a Banach ring. The induced topology is 
discrete, but $\|\cdot\|_\infty$ is very far from being equivalent to the 
trivial norm on $\bZ$. 
\end{example}

\begin{example}
Let $A$ be a Banach ring, $\fa\subset A$ a closed ideal. Then $A/\fa$, with the 
residue norm, is a Banach ring. 
\end{example}

\begin{example}
In the context of the above example, if $\fm\subset A$ is any maximal ideal, 
then $A/\fm$ is a Banach field. Here we implicitly take advantage of 
\autoref{lem:maximal-ideal-closed}. 
\end{example}

\begin{lemma}\label{lem:maximal-ideal-closed}
Let $A$ be a Banach ring, $\fm\subset A$ a maximal ideal. Then $\fm$ is closed. 
\end{lemma}
\begin{proof}
If $\fa\subset A$ is any ideal, then its closure $\closure(\fa)$ is also an 
ideal. Of course, if $\fa$ is a proper ideal, then 
$\fa\cap A^\times=\varnothing$. But $A^\times$ is open. Indeed, if 
$x\in A^\times$, then $\disk^-(x,r)\subset A^\times$ for 
$r=\frac 1 2 \|x^{-1}\|^{-1}$. To see this, let $x+h\in \disk^-(x,r)$; we wish 
to show that $x+h\in A^\times$. We know that $\|h\|<\frac 1 2 \|x^{-1}\|^{-1}$, 
so $\|h x^{-1}\| \leqslant \|h\| \|x^{-1}\| < \frac 1 2$. Write 
$x+h=x(1+h x^{-1})$; the element $1+h x^{-1}$ is invertible by 
\autoref{lem:principle-units-invertible}
\end{proof}

\begin{lemma}\label{lem:principle-units-invertible}
Let $A$ be a Banach ring. Then $\disk^-(1,1)\subset A^\times$. 
\end{lemma}
\begin{proof}
We need to show that if $\|x\|<1$, then $1-x$ is invertible. The sequence 
\[
  a_n = 1 + x + \cdots + x^n ,
\]
is Cauchy because $\|x\|<1$, so it converges. One can easily check that the 
limit is $(1-x)^{-1}$. 
\end{proof}

\begin{example}\label{ex:Tate-algebra}
Let $A$ be a Banach ring with norm $\|\cdot\|$. Choose $r\in \bR^{>0}$. We 
define the ring $A\respow{r^{-1} T}\subset A\pow{T}$ to be the set of power 
series $f=\sum_{i\geqslant 0} a_i T^i$ such that 
$\sum \|a_i\| r^i< \infty$. If $A$ is non-archimedean, we only need to require 
$\|a_i\| r^i \to 0$. We call $A\respow{r^{-1} T}$ a ring of \emph{convergent 
power series}. We define a norm on $A\respow{r^{-1} T}$ by: 
\begin{align*}
  \|f\| &= \sum \|a_i\| r^i && \text{archimedean case} \\
  \|f\| &= \max\{ \|a_i\| r^i\} && \text{non-archimedean case} .
\end{align*}
We could have used the first definition in both cases, but the latter is easier 
to handle. Claim: $(A\respow{r^{-1} T},\|\cdot\|)$ is a Banach ring. 
\end{example}

\begin{example}
Let $\{A_i\}_{i\in I}$ be an arbitrary collection of Banach rings. Then the 
direct product $A=\prod A_i$ can be ``too large'' to be a Banach ring. It 
contains a natural Banach ring, namely the \emph{bounded direct product} 
\[
  \prod^\mathrm{b} A_i = \left\{(f_i)_{i\in I}\colon \sup\|f_i\|<\infty\right\} .
\]
This is a banach ring with respect to the norm 
$\|(f_i)\| = \sup \|f_i\|$. Also, there is the \emph{restricted direct 
product}:
\[
  \prod^\mathrm{c} A_i = \left\{(f_i)_{i\in I}\colon \lim \|f_i\|\to 0\right\} ,
\]
and the direct sum $\bigoplus_i A_i$. Note that the restricted direct product 
and direct sum will not be unital rings. 
\end{example}





\subsection{Spectrum: definition and first properties}

Let $(A,\|\cdot\|)$ be a normed ring. A seminorm $|\cdot|$ on $A$ is called 
\emph{bounded} (with respect to $\|\cdot\|$) if there exists $c>0$ such that 
$|f|\leqslant c\|f\|$ for all $f\in A$. One also calls bounded seminorms 
\emph{admissible}. If $|\cdot|$ is bounded, then the induced map 
$|\cdot|\colon A\to \bR,f\mapsto |f|$ is continuous, where $\bR$ has its usual 
topology and $A$ has the topology induced by $\|\cdot\|$. 

\begin{definition}
Let $A$ be a commutative unital Banach ring with fixed norm $\|\cdot\|$. The 
\emph{spectrum} of $A$, denoted $\Berkspec(A)$, is the set of bounded 
multiplicative seminorms on $A$. For $x\in \Berkspec(A)$, let $|\cdot|_x$ be 
the corresponding seminorm. We give $\Berkspec(A)$ the weakest topology making 
all maps $x\mapsto |f|_x$ continuous. 
\end{definition}

\begin{theorem}\label{thm:Berkspec-not-empty}
Let $A$ be a commutative Banach ring. Then 
\begin{enumerate}
\item
$\Berkspec(A)\ne\varnothing$. 

\item
$\Berkspec(A)$ is Hausdorff. 

\item
$\Berkspec(A)$ is compact. 
\end{enumerate}
\end{theorem}
\begin{proof}
1. This is the hardest part of the proof. Let $\fm\subset A$ be a maximal 
ideal; $\fm$ is closed by \autoref{lem:maximal-ideal-closed}. The quotient 
$A/\fm$ is a field, complete with respect to the residue norm. If 
$\Berkspec(A/\fm)\ne\varnothing$, then $\Berkspec(A)\ne\varnothing$. Indeed, 
if $|\cdot|$ is a bounded multiplicative seminorm on $A/\fm$, then 
$|\cdot|\colon A\to \bR$ given by $f\mapsto |f+\fm|$ is a bounded 
multiplicative seminorm on $A$. (This is a special case of functoriality: if 
$f\colon A\to B$ is a bounded homomorphism of Banach rings, there is a natural 
map $f^\ast\colon \Berkspec(B)\to \Berkspec(A)$.) Without loss of generality, 
we may assume that $A$ is a field. 

Let $S$ be the set of all non-zero bounded seminorms on $A$. Given 
$|\cdot|,|\cdot|'\in S$, we put $|\cdot|\leqslant |\cdot|'$ if 
$|f|\leqslant |f|'$ for all $f\in A$. This gives $S$ a partial order. Since 
$\|\cdot\|\in S$, the set $S$ is non-empty. If 
$\{|\cdot|_i\}_{i\in I}\subset S$ is a chain, then $\inf_i |\cdot|_i\in S$ is 
a lower bound for $\{|\cdot|_i\}_{i\in I}$. Zorn's lemma gives us a minimal 
element $|\cdot|\in S$. We claim that 
$|\cdot|$ is multiplicative. To show this, it's enough to show that 
$|f^{-1}| = |f|^{-1}$ for all $f\in A^\times$. For, we already know that 
$|f g|\leqslant |f| |g|$, so just compute:
\[
  |f g|^{-1} = |f^{-1} g^{-1}| \leqslant |f^{-1} |g^{-1}| = |f|^{-1} |g|^{-1} .
\]
We always have $1\leqslant |f| |f^{-1}|$, so assume there exists $f$ with 
$|f|^{-1}<|f^{-1}|$. Let $r=|f^{-1}|^{-1}<|f|$. Consider the 
Tate algebra (from \autoref{ex:Tate-algebra}):
\[
  B = A\respow{r^{-1} T} = \left\{\sum_{i\geqslant 0} a_i T^i\colon \sum |a_i| r^i < \infty\right\} .
\]
Note that $|\cdot|$ extends to $B$ by $|\sum a_i T^i| = \sum |a_i| r^i$. We 
claim that $f-T$ is not invertible in $B$. If it did have an inverse, this 
would be $\sum f^{-i} T^i$, which has norm $\sum |f^{-i}| r^i = \sum 1$, which 
diverges. (See the proof of \cite[1.2.1]{berkovich-1990} for details). Consider 
the map $A\to B/\langle f-T\rangle\ne\varnothing$. This induces a smaller 
bounded seminorm on $A$, which contradicts the minimality of $|\cdot|$. So 
$|\cdot|$ is multiplicative. 

2. For $x\ne y\in \Berkspec(A)$, we want to show there are disjoint open 
neighborhoods of $x$ and $y$. Since $x\ne y$, there exists some $f\in A$ such 
that $|f|_x\ne |f|_y$, say $|f|_x<|f|_y$. Choose $r\in \bR$ with 
$|f|_x<r<|f|_y$. Then $\{z\in \Berkspec(A)\colon |f|_z<r\}$ and 
$\{z\in \Berkspec(A)\colon |f|_z>r\}$ are the desired sets. 

3. Let $C=\prod_{f\in A} [0,\|f\|]$; this is compact by Tychonoff's theorem. 
Note that $\Berkspec(A)\hookrightarrow C$ via $x\mapsto (|f|_x)_{f\in A}$. 
Moreover, $\Berkspec(A)\subset C$ is closed because all the defining properties 
of $\Berkspec(A)$ are closed conditions. Thus $\Berkspec(A)$ is itself 
compact. 
\end{proof}

If $\|\cdot\|$ is already multiplicative, then $\Berkspec(A)\ne\varnothing$ 
because $\|\cdot\|\in \Berkspec(A)$. This is much harder in general. We didn't 
actually need the completeness of $A$ in the above definition. This is because 
any bounded seminorm on $A$ has a unique extension to $\widehat A$. We could 
have replaced $\|\cdot\|$ with any equivalent seminorm and get the same 
$\Berkspec(A)$. 

Let $|\cdot|\colon A\to \bR$ be a power-multiplicative bounded seminorm. Then 
$|f|^n \leqslant c\|f\|^n$; take $n$-th roots and let $n\to \infty$ to realize 
that we may assume $c=1$. So all $x\in \Berkspec(A)$ satisfy 
$|f|_x\leqslant \|f\|$ for all $f\in A$. 

The topology of $\Berkspec(A)$ is very mysterious. In general, one needs model 
theory to prove some basic facts (e.g.~that $\Berkspec(A)$ ``looks like'' a 
simplicial complex). Here are two equivalent ways to define the topology:
\begin{enumerate}
\item
The topology on $X=\Berkspec(A)$ is generated by open sets of the form 
\[
  \{x\in X\colon |f|_x<\alpha\} , \qquad \{x\in X\colon |f|_x>\alpha\} ,
\]
for $f\in A$, $\alpha\in \bR$. 

\item
A filter $\fF$ converges to $x\in X$ if and only if the filter 
\[
  |f|_\fF = \left\{\{|f|_u\colon u\in U\}\colon U\in \fF\right\} 
\]
converges to $|f|_x$ for all $f\in A$.  
\end{enumerate}

Let $x\in \Berkspec(A)$. Then $\fp_x = \ker(|\cdot|_x)$ is a closed prime 
ideal. For $f\in A$, $|f|_x$ depends only on $\bar f\in A/\fp_x$. But 
$|\cdot|_x$ is a bounded multiplicative norm on $A/\fp_x$. The ring $A/\fp_x$ 
is an integral domain, so we can pass to its field of fractions 
$(A/\fp_x)_{(0)}$, which carries the norm induced by $|\cdot|_x$. Let 
$\sH(x) = \widehat{(A/\fp_x)_{(0)}}$; this is the \emph{completed residue 
field} of $A$ at $x$. For $f\in A$, write $f(x)$ for the image of $f$ under the 
composite map 
\[
  A \twoheadrightarrow A/\fp_x \hookrightarrow (A/\fp_x)_{(0)} \hookrightarrow \widehat{(A/\fp_x)_{(0)}} = \sH(x) .
\]
We will write $|\cdot|$ for the canonical extension of $|\cdot|_x$ to 
$\sH(x)$. So $|f(x)| = |f(x)|_x = |f|_x$. The map $A\to \sH(x)$ is a 
``character,'' in the following sense. 

\begin{definition}
Let $A$ be a Banach ring. A \emph{character} on $A$ is a nonzero bounded 
homomorphism to a field complete with respect to some absolute value. 
\end{definition}

\begin{definition}
Let $A$ be a Banach ring. The \emph{Gelfand transform} on $A$ is the natural 
map 
\[
  A\to \prod^\mathrm{b}_{x\in \Berkspec(A)}  \sH(x) \qquad f\mapsto (f(x))_{x\in \Berkspec(A)} .
\]
\end{definition}

Let $B=\prod_{x\in \Berkspec(A)}^\mathrm{b} \sH(x)$. Then $B$ is a Banach ring, 
and the Gelfand transform $A\to B$ is a bounded map. We get an induced 
surjective map $\Berkspec(B)\to \Berkspec(A)$. 

\begin{lemma}
Let $A$ be a Banach ring. Then $f\in A$ is invertible if and only if 
$f(x)\ne 0$ for all $x\in \Berkspec(A)$. 
\end{lemma}
\begin{proof}
If $f\in A^\times$, then $|1|_x = |f f^{-1}|_x = 1$, so $|f|_x\ne 0$, whence 
$f(x)\ne 0$ in $\sH(x)$ for all $x$. If $f\notin A^\times$, then there is some 
maximal (hence prime) ideal $\fm\ni f$. By \autoref{thm:Berkspec-not-empty}, 
$\Berkspec(A/\fm)\ne\varnothing$. Choose $|\cdot|\in \Berkspec(A/\fm)$, and 
let $|\cdot|_x\in \Berkspec(A)$ be its pullback. Then 
$|f|_x = |f+\fm| = |\fm| = 0$. 
\end{proof}

Let $x\in \Berkspec(A)$. We have seen that there is a natural character 
$\chi_x\colon A\to \sH(x)$. Conversely, given a character $\chi\colon A\to K$, 
we get a bounded multiplicative seminorm $|\cdot|_\chi\colon A\to \bR$, defined 
by $|f|_\chi = |\chi(f)|$. At the moment, different characters might induce the 
same seminorm on $A$. We handle this by noting that two characters 
$\chi',\chi''$ give the same point in $\Berkspec(A)$ if and only if they are 
equivalent in the following sense: there exists a character $\chi\colon A\to K$ 
such that the following diagram commutes:
\begin{equation}\label{eq:equiv-characters}
\begin{tikzcd}
  & A \ar[dl, swap, "\chi'"] \ar[d, "\chi"] \ar[dr, "\chi''"] \\
  K' 
    & K \ar[l, hook] \ar[r, hook]
    & K''
\end{tikzcd}
\end{equation}


\subsection{Comparison with algebraic spectrum}

Let $A$ be a (commutative, unital) ring. Recall that $\spec(A)$ is the set of 
prime ideals in $A$, i.e.
\[
  \spec(A) = \{\fp\subset A\colon \fp\text{ is prime}\} .
\]
The set $\spec(A)$ has a topology with closed sets 
\[
  V_\fa = \{\fp\in \spec(A)\colon \fp\supset \fa\} ,
\]
where $\fa$ ranges over ideals in $A$. An \emph{algebraic character} on $A$ is 
a ring homomorphism from $A$ to a field, $\chi\colon A\to K$. 

Given $\fp\in \spec(A)$, we get a character 
\[
  \chi_\fp\colon A\twoheadrightarrow A/\fp \hookrightarrow (A/\fp)_{(0)} .
\]
Conversely, given a character $\chi\colon A\to K$, the ideal 
$\ker(\chi)\in \spec(A)$. Two characters $\chi',\chi''$ give the same point in 
$\spec(A)$ if and only if a diagram \eqref{eq:equiv-characters} exists in the 
algebraic category.

There is a natural map $\ker\colon \Berkspec(A)\to \spec(A)$ (the \emph{kernel 
map}), given by $|\cdot|\mapsto \ker(|\cdot|)$. This should not be mistaken for 
the specialization map we will encounter later. 

\begin{lemma}
\leavevmode
\begin{enumerate}
\item
The map $\ker\colon \Berkspec(A)\to \spec(A)$ is continuous. 

\item
If $\|\cdot\|$ (the fixed norm on $A$) is trivial, then 
\begin{enumerate}
\item
$\ker\colon \Berkspec(A)\to \spec(A)$ is surjective, 

\item
there is a canonical section $\spec(A)\to \Berkspec(A)$
\end{enumerate}
\end{enumerate}
\end{lemma}
\begin{proof}
1. Let $\fa\subset A$ be an ideal. We claim that  
\[
  \ker^{-1}(V_\fa) = \bigcap_{f\in \fa}\{x\in \Berkspec(A)\colon |f|_x = 0\} .
\]
Indeed, if $x$ lies in the right hand side, then for all $f\in \fa$, 
$|f|_x=0$, whence $f\in \fa\Rightarrow f\in \fp_x$, so we get 
$\fa\subset \fp_x$, i.e.~$\fp_x\in V_\fa$. This is equivalent to 
$\ker(|\cdot|_x)\subset V_\fa$, i.e.~$x\in \ker^{-1}(V_\fa)$. In fact, all the 
above implications are equivalences.

2. Givn $\fp\in \spec(A)$, define $|\cdot|_\fp\in \Berkspec(A)$ by 
\[
  |f|_\fp = \begin{cases} 0 & f\in \fp \\ 1 & f\notin \fp \end{cases} .
\]
Since $\|\cdot\|$ is trivial, $|\cdot|_\fp$ is a bounded multiplicative 
norm on $A$. The map $\fp\mapsto |\cdot|_\fp$ is the desired canonical 
section. 
\end{proof}


\subsection{Functoriality of \texorpdfstring{$\Berkspec$}{M}}

We want to show that $A\mapsto \Berkspec(A)$ is functorial in the appropriate 
sense. Let $\varphi\colon (A,\|\cdot\|)\to (B,\|\cdot\|')$ be a bounded 
homomorphism of commutative Banach rings. (As always, we assume that 
$\varphi(1)=1$.)

\begin{theorem}
\leavevmode
\begin{enumerate}
\item
The map $\varphi^\ast\colon \Berkspec(B)\to \Berkspec(A)$ given by 
$\varphi^\ast(|\cdot|') = |\cdot|$, $|f| = |\varphi(f)|'$, is well-defined and 
continuous. 

\item
Assume the set 
\[
  \left\{\frac{\varphi(f)}{\varphi(g)}\colon f,g\in A\text{ and }\varphi(g)\in B^\times\right\} 
\]
is dense in $B$. Then $\varphi^\ast$ is injective. 

\item
If $\varphi^\ast$ is injective, then $\Berkspec(B)$ is homeomorphic to its 
image in $\Berkspec(A)$. 
\end{enumerate}
\end{theorem}
\begin{proof}
1. That $|\cdot| = \varphi^\ast(|\cdot|')$ is multiplicative is obvious. To see 
that it is bounded, note that for all $f\in A$, we have 
\[
  |f| = |\varphi(f)|' \leqslant c_1 \|\varphi(f)\|' \leqslant c_1 c_2 \|f\| .
\]
Continuity follows from the fact that 
\[
  (\varphi^\ast)^{-1}\left(\{x\in \Berkspec(A)\colon |f(x)|>\alpha\}\right) = \{y\in \Berkspec(B)\colon |\varphi(f)(y)| > \alpha\} .
\]

2. Let $|\cdot|'\ne|\cdot|''\in \Berkspec(B)$ be such that 
$\varphi^\ast(|\cdot|') = \varphi^\ast(|\cdot|'')$. Then there exists $h\in B$ 
such that $|h|'\ne |h|''$, so we may as well assume $|h|'<|h|''$. Let 
$2\epsilon < |h|''-|h|'$. By assumption, there exists $f,g\in A$ such that 
$\varphi(g)\in B^\times$ and 
$\left\|h-\frac{\varphi(f)}{\varphi(g)}\right\|' < \epsilon$. Thus 
$\left|h-\frac{\varphi(f)}{\varphi(g)}\right| < \epsilon$ and 
$\left|h-\frac{\varphi(f)}{\varphi(g)}\right|'' < \epsilon$. Apply the triangle 
inequality:
\begin{align*}
  \left|\frac{\varphi(f)}{\varphi(g)}\right|' 
    &= \left|\frac{\varphi(f)}{\varphi(g)} - h+ h\right|' \\
    &\leqslant \left|\frac{\varphi(f)}{\varphi(g)} - h\right|' + |h|' \\
    &< \epsilon + |h|' \\
    &< |h|' - \epsilon .
\end{align*}
Similarly 
\begin{align*}
  |h|'' 
    &= \left|h - \frac{\varphi(f)}{\varphi(g)} + \frac{\varphi(f)}{\varphi(g)}\right|'' \\
    &\leqslant \left|h-\frac{\varphi(f)}{\varphi(g)}\right|'' + \left|\frac{\varphi(f)}{\varphi(g)}\right|'' \\
    &< \epsilon + \left|\frac{\varphi(f)}{\varphi(g)}\right|'' .
\end{align*}
It follows that 
$\left|\frac{\varphi(f)}{\varphi(g)}\right|' < \left|\frac{\varphi(f)}{\varphi(g)}\right|''$, 
so $|\varphi(f)|' |\varphi(g)|'' < |\varphi(f)|'' |\varphi(g)|'$. This implies 
$|f||g| < |f| |g|$, a contradiction. 

3. This follows from the general fact, proved in [Folland, p.129], that if 
$X$ is quasi-compact, $Y$ is Hausdorff, then any continuous bijection 
$f\colon X\to Y$ is a homeomorphism. 
\end{proof}

Note that the recurring norm 
\[
  |f|_\fp = \begin{cases} 1 & f\notin \fp \\ 0 & f\in \fp \end{cases} ,
\]
comes from the trivial seminorm on $A/\fp$. 

%-----------------------------

Usually (e.g., in classical algebraic geometry) one cares about rings that are 
also $K$-vector spaces, for some field $K$. 

\begin{definition}
Let $R$ be a commutative ring. A (unital, associative) \emph{$R$-algebra} is an 
abelian group $A$ equipped with the structure of both a (associative, unital) 
ring and an $R$-module, such that ring multiplication is $R$-bilinear in the 
sense that $r\cdot(x y) = (r\cdot x) y = x(r\cdot y)$. 
\end{definition}

We are often interested in commutative $R$-algebras, but some aspects of the 
theory (especially over $\bC$) work just as well for possibly non-commutative 
algebras. 

Let $K$ be a field with absolute value, $A$ a $K$-algebra. A \emph{norm} 
$|\cdot|$ on $A$ is both a ring norm and a $K$-vector space norm. This in 
particular requires that $\|a v\| = |a| \| v\|$ for all $a\in K$, $v\in A$. 
So any norm on $A$ ``remembers'' the norm on $K$. More precisely, if $A$ is a 
normed $K$-algebra, $\|\cdot\|_x\colon A\to \bR$ a bounded multiplicative 
seminorm. Then $|\cdot|_x$ induces an absolute value on $\sH(x)$. But $\sH(x)$ 
is a complete extension of $K$. It turns out that $|\cdot|_x$ on $\sH(x)$ 
must restrict to $|\cdot|$ on $K$. This is Exercise 4.3.1 in Conrad's notes in 
\cite{aws-2008}.





\subsection{Boundedness versus continuity for \texorpdfstring{$K$}{K}-algebras}

Let $\varphi\colon A\to B$ be a $K$-algebra homomorphism. We assume that 
$A$ and $B$ have been given ($K$-)norms $\|\cdot\|$ and $\|\cdot\|'$. Clearly, 
if $\varphi$ is bounded (i.e.~$\|\varphi(f)\|' \leqslant c\|f\|$ for all 
$f\in A$), then $\varphi$ is continuous. We have sen that the converse does not 
always hold. 

Let's try working towards proving the converse. Let $\varphi\colon A\to B$ be a 
continuous homomorphism. Then $\varphi$ is continuous if and only if it is 
continuous at $0$. So there exists a neighborhood $U\ni 0$ such that 
$\varphi(U)\subset \{b\in B\colon \|b\|'<1\}$. There is $\delta>0$ such that 
$\{a\in A\colon \|a\|\leqslant \delta\}\subset U$. So 
$\|\varphi(x)\|'\leqslant 1$ whenever $\|x\|\leqslant \delta$. If we were 
working over $\bC$, we would not rescale. But this doesn't work if the norm on 
$K$ is trivial. If the norm $|\cdot|$ on $K$ is \emph{not} trivial (i.e., 
$|K^\times|\ne 1$) then by rescaling we can say that 
$\|x\|\leqslant |a|\Rightarrow \|\varphi(x)\|' \leqslant \frac{|a|}{\delta}$. 
So generally, $\|\varphi(x)\|' \leqslant \frac{1}{\delta}\|x\|$, and 
$\varphi$ is bounded. 

If $|\cdot|$ is trivial on $K$, then continuity does not imply boundedness. If 
$|\cdot|$ is nontrivial, many other (but not all) basic facts of functional 
analysis are also true, e.g.~Banach's open mapping theorem (a bijective bounded 
$K$-algebra homomorphism $A\to B$ has bounded inverse). 





\subsection{Gelfand's theory for \texorpdfstring{$K=\bC$}{K=C}}

Much of this material can be found in [Rudin, Functional analysis ch.10-11].
Here is our motivating example. 

\begin{example}
Let $X$ be a nonempty compact Hausdorff space. Let $A=C^0(X)$ be the space of 
continuous $\bC$-valued functions on $X$. With pointwise multiplication, $A$ is 
naturally a (commutative, unital) $\bC$-algebra. We give $A$ the supremum norm: 
\[
  \|f\| = \sup_{x\in X} |f(x)| .
\]
It's a standard fact that $A$ is complete, i.e.~it is a Banach $\bC$-algebra.
\emph{Warning}: $\|fg\|\leqslant \|f\|\|g\|$, and we \emph{don't} have 
equality. 
\end{example}

\begin{example}
Let $X$ be a finite set with $n$ points. Then $C^0(X)=\bC^n$. 
\end{example}

It is natural to ask: ``given any commutative Banach $\bC$-algebra $A$, can we 
embed $A$ into $C^0(X)$ for some compact Hausdorff $X$?''

\begin{example}
Consider $(L^1(\bR^n),\ast)$, the convolution algebra of $L^1$-functions on 
$\bR^n$. This is a commutative (non-unital) algebra. We fix the absense of a 
unit by instead considering $A$, the space of Borel measures on $\bR^n$ of the 
form $\mu=f+\lambda\delta$, where $f\in L^1(\bR^n)$, $\lambda\in \bC$, and 
$\delta$ is the \emph{Dirac delta}, which behaves as 
\[
  (f_1+\lambda_1\delta) \ast (f_2+\lambda_2 \delta) = (f_1\ast f_2+\lambda_2 f_1 + \lambda_1 f_2) + \lambda_1 \lambda_2 \delta .
\]
Give $A$ a norm by 
\[
  \|f+\lambda\delta\| = \|f\|_{L^1} + |\lambda| .
\]
\end{example}

\begin{example}
Let $X$ be a Banach space over $\bC$. Let $B(X)$ be the algebra of bounded 
linear operators on $X$, with $\|\cdot\|$ the operator norm. For example, if 
$\dim(X)=n$, then $B(X)\simeq M_n(\bC)$. Note that if $n>1$, then $B(X)$ is 
\emph{not} commutative. The theory of Gelfand-Mazur (and some of Berkovich's) 
work for non-commutative algebras as well. 
\end{example}

\begin{definition}
Let $A$ be a $\bC$-algebra. Put 
\[
  \sigma(f) = \{\lambda\in \bC\colon \lambda-f\notin A^\times\} .
\]
(In functional analysis, one calls $\sigma(f)$ the spectrum of $f$, but we will 
avoid using this terminology. The complement $\bC\smallsetminus \sigma(f)$ is 
called the resolvent of $f$.)
\end{definition}

For $K$ non-archimedean, one can give a definition for $\sigma(f)$, but this is 
quite difficult, so we won't. See \cite[Ch.~7]{berkovich-1990} for details. 

\begin{theorem}
Let $f\in A$. Then 
\begin{enumerate}
\item
$\sigma(f)\ne\varnothing$, 

\item
$\sigma(f)$ is compact. 
\end{enumerate}
\end{theorem}
\begin{proof}
Part 1 is essentially \autoref{lemma:spec-Banach}. For part 2, it suffices to 
show that $\sigma(f)$ is closed and bounded. That $\sigma(f)$ is closed follows 
(essentially) from the fact that $A^\times$ is open. For boundedness of 
$\sigma(f)$, see below. 
\end{proof}

\begin{definition}
For $f\in A$, put 
\[
  \rho(f) = \sup\{|\lambda|\colon \lambda\in \sigma(f)\} .
\]
\end{definition}

\begin{theorem}
$\rho(f) = \lim_{n\to \infty} \|f^n\|^{1/n}$. 
\end{theorem}
The proof will be given in a more general setting, after giving an equivalent 
definition of $\rho(f)$. 

\begin{definition}
Let $A$ be a Banach $\bC$-algebra. As a set, 
\[
  \cM(A) = \{\chi\colon A\twoheadrightarrow \bC\text{ a homomorphism of $\bC$-algebras}\} .
\]
\end{definition}

\begin{lemma}
\leavevmode
\begin{enumerate}
\item
Any $\chi\in \cM(A)$ is bounded.

\item
$\cM(A)$ can be identified with the space of maximal ideals in $A$ via 
$\chi\leftrightarrow \ker(\chi)$. 

\item
$\cM(A)=\Berkspec(A)$

\item
$f\in A^\times$ if and only if $\chi(f)\ne 0$ for all $\chi\in \cM(A)$. 

\item
$\lambda\in \sigma(f)$ if and only if $\chi(f)=\lambda$ for some 
$\chi\in \cM(A)$. 
\end{enumerate}
\end{lemma}
\begin{proof}
1. Use the fact that $\chi\colon A\to \bC$ respects the $\bC$-algebra structure 
of $A$. 

2. For $x\in \cM(A)$, $\sH(x)$ is a complete field containing $\bC$, we have 
$\sH(x)=\bC$. 

4. If $f\notin A^\times$, then $f\notin \fm$ for all $\fm$ maximal. 

5. Apply part 4 to $\lambda-f$. 
\end{proof}

For $f\in A$, the \emph{Gelfand transform} of $f$ is the function 
$\hat f\colon \cM(A)\to \bC$ defined by 
\[
  \hat f(\chi) = \chi(f) .
\]
We have seen that $\rho(f) = \sup_{\chi\in \cM(A)} |\hat f(\chi)|$. 
